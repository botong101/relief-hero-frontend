import{a as ce,b as se,c as pe}from"./chunk-5ADN5T44.js";import{a as W,b as Y,c as x,d as J,e as K,f as X,g as Z,h as ee,i as te,j as ne,k as oe,o as ie,p as re,q as ae,r as le}from"./chunk-FKMIZAYU.js";import{c as B,d as j,g as Q}from"./chunk-XMQ3WWIA.js";import{a as G,b as U}from"./chunk-EMML4XWL.js";import{b as $}from"./chunk-TPXSCQ7K.js";import{Fb as z,Gb as N,Hb as V,Na as b,Pa as c,Qa as v,Sa as n,Ta as t,Ua as s,Va as S,Wa as O,Xa as d,ab as o,bb as k,ca as I,cb as E,eb as R,f as F,fb as T,gb as q,ib as A,jb as D,kb as u,la as P,lb as h,ma as M,mb as H,va as _,wa as L,ya as l,za as w}from"./chunk-LO2TXSAH.js";var de=()=>({standalone:!0});function me(r,m){if(r&1&&(n(0,"div",16),o(1),t()),r&2){let e=d();l(),E(" ",e.error," ")}}function fe(r,m){if(r&1&&(n(0,"div",17)(1,"h4"),s(2,"span",4),u(3,"safeHtml"),o(4," Restriction Active"),t(),n(5,"p")(6,"strong"),o(7),t()(),n(8,"div",18)(9,"div",19),o(10,"Time Remaining:"),t(),n(11,"div",20),o(12),t()(),n(13,"div",21)(14,"p"),o(15,"You received a donation recently. To ensure fair distribution of resources, you can request help again after the restriction period ends."),t(),n(16,"p")(17,"strong"),o(18,"Next Request Allowed:"),t(),o(19),u(20,"date"),t()(),n(21,"button",22),o(22," \u2190 Back to Map "),t()()),r&2){let e=d();l(2),c("innerHTML",h(3,4,e.getIcon("clock")),_),l(5),k(e.restrictionData.message),l(5),k(e.timeRemaining),l(7),E(" ",H(20,6,e.restrictionData.next_allowed_at,"medium"),"")}}function ge(r,m){r&1&&(n(0,"div",48),o(1," First name is required "),t())}function ue(r,m){r&1&&(n(0,"div",48),o(1," Last name is required "),t())}function _e(r,m){r&1&&(n(0,"div",48),o(1," Please enter a valid PH mobile number "),t())}function he(r,m){if(r&1&&(n(0,"div",31)(1,"p",32),s(2,"span",4),u(3,"safeHtml"),o(4," Share your contact information so donators can reach you "),t(),n(5,"div",33)(6,"label",34),o(7," First Name "),n(8,"span",35),o(9,"*"),t()(),s(10,"input",36),b(11,ge,2,0,"div",37),t(),n(12,"div",33)(13,"label",38),o(14," Last Name "),n(15,"span",35),o(16,"*"),t()(),s(17,"input",39),b(18,ue,2,0,"div",37),t(),n(19,"div",33)(20,"label",40),o(21," Phone Number "),n(22,"span",35),o(23,"*"),t(),n(24,"small"),o(25,"(e.g., 09123456789 or +639123456789)"),t()(),s(26,"input",41),b(27,_e,2,0,"div",37),t(),n(28,"div",33)(29,"label",42),o(30," Facebook Profile "),n(31,"small"),o(32,"(optional)"),t()(),s(33,"input",43),t(),n(34,"div",33)(35,"label",44),o(36," Email Address "),n(37,"small"),o(38,"(optional)"),t()(),s(39,"input",45),t(),n(40,"div",33)(41,"label",46),o(42," Additional Notes "),n(43,"small"),o(44,"(optional - describe your situation)"),t()(),s(45,"textarea",47),t()()),r&2){let e,a,i,p,g,C,y,f=d(2);l(2),c("innerHTML",h(3,12,f.getIcon("phone")),_),l(8),v("error",((e=f.shareLocationForm.get("first_name"))==null?null:e.invalid)&&((e=f.shareLocationForm.get("first_name"))==null?null:e.touched)),l(),c("ngIf",((a=f.shareLocationForm.get("first_name"))==null?null:a.invalid)&&((a=f.shareLocationForm.get("first_name"))==null?null:a.touched)),l(6),v("error",((i=f.shareLocationForm.get("last_name"))==null?null:i.invalid)&&((i=f.shareLocationForm.get("last_name"))==null?null:i.touched)),l(),c("ngIf",((p=f.shareLocationForm.get("last_name"))==null?null:p.invalid)&&((p=f.shareLocationForm.get("last_name"))==null?null:p.touched)),l(8),v("error",((g=f.shareLocationForm.get("phone"))==null?null:g.invalid)&&((g=f.shareLocationForm.get("phone"))==null?null:g.touched)),l(),c("ngIf",((C=f.shareLocationForm.get("phone"))==null?null:C.invalid)&&((C=f.shareLocationForm.get("phone"))==null?null:C.touched)),l(12),v("error",((y=f.shareLocationForm.get("email"))==null?null:y.invalid)&&((y=f.shareLocationForm.get("email"))==null?null:y.touched))}}function xe(r,m){if(r&1){let e=S();n(0,"div",52),s(1,"img",53),n(2,"button",54),O("click",function(){P(e);let i=d(3);return M(i.removePhoto())}),s(3,"span",4),u(4,"safeHtml"),o(5," Remove Photo "),t()()}if(r&2){let e=d(3);l(),c("src",e.photoPreview,L),l(2),c("innerHTML",h(4,2,e.getIcon("trash")),_)}}function be(r,m){if(r&1){let e=S();n(0,"div",55)(1,"label",56),o(2," \u{1F4F8} Take Photo "),t(),n(3,"input",57),O("change",function(i){P(e);let p=d(3);return M(p.onPhotoSelected(i))}),t(),n(4,"p",32),s(5,"span",4),u(6,"safeHtml"),o(7," Photo is required to verify your location for safety purposes "),t()()}if(r&2){let e=d(3);l(5),c("innerHTML",h(6,1,e.getIcon("info")),_)}}function ve(r,m){if(r&1&&(n(0,"div",31)(1,"p",32),o(2," \u{1F4F8} Take a photo to verify your location (required for safety) "),t(),n(3,"div",49),b(4,xe,6,4,"div",50)(5,be,8,3,"div",51),t()()),r&2){let e=d(2);l(4),c("ngIf",e.photoPreview),l(),c("ngIf",!e.photoPreview)}}function Ce(r,m){r&1&&(n(0,"div",48),o(1," Please specify how many people need assistance "),t())}function ye(r,m){if(r&1&&(n(0,"div",58)(1,"p",32),s(2,"span",4),u(3,"safeHtml"),o(4," Tell us what supplies you need "),t(),n(5,"div",33)(6,"label",59),o(7," Number of People "),n(8,"span",35),o(9,"*"),t()(),s(10,"input",60),b(11,Ce,2,0,"div",37),t(),n(12,"div",61)(13,"div",33)(14,"label",62),s(15,"span",4),u(16,"safeHtml"),o(17," Water (liters)"),t(),s(18,"input",63),t(),n(19,"div",33)(20,"label",64),o(21,"\u{1F35A} Food (packs)"),t(),s(22,"input",65),t(),n(23,"div",33)(24,"label",66),o(25,"\u{1F48A} Medical"),t(),s(26,"input",67),t(),n(27,"div",33)(28,"label",68),s(29,"span",4),u(30,"safeHtml"),o(31," Clothing (sets)"),t(),s(32,"input",69),t(),n(33,"div",33)(34,"label",70),o(35,"\u26FA Shelter"),t(),s(36,"input",71),t()(),n(37,"div",33)(38,"label",72),o(39,"Other Needs"),t(),s(40,"textarea",73),t()()),r&2){let e,a,i=d(2);l(2),c("innerHTML",h(3,6,i.getIcon("package")),_),l(8),v("error",((e=i.shareLocationForm.get("supply_needs.people_count"))==null?null:e.invalid)&&((e=i.shareLocationForm.get("supply_needs.people_count"))==null?null:e.touched)),l(),c("ngIf",((a=i.shareLocationForm.get("supply_needs.people_count"))==null?null:a.invalid)&&((a=i.shareLocationForm.get("supply_needs.people_count"))==null?null:a.touched)),l(4),c("innerHTML",h(16,8,i.getIcon("water")),_),l(14),c("innerHTML",h(30,10,i.getIcon("clothing")),_)}}function Pe(r,m){if(r&1){let e=S();n(0,"div",31)(1,"div",74)(2,"h3"),s(3,"span",4),u(4,"safeHtml"),o(5," Location Shared Successfully!"),t(),n(6,"p"),o(7,"Your location has been registered and is now visible to donators."),t()(),n(8,"div",75)(9,"h4"),s(10,"span",4),u(11,"safeHtml"),o(12," Your Unique QR Code"),t(),n(13,"p",76)(14,"strong"),o(15,"Important:"),t(),o(16," Save this QR code! Donators will scan it when they deliver donations to you. "),t(),n(17,"div",77),s(18,"qrcode",78),t(),n(19,"div",79)(20,"strong"),o(21,"Code:"),t(),o(22),t(),n(23,"div",80)(24,"h5"),s(25,"span",4),u(26,"safeHtml"),o(27," How It Works:"),t(),n(28,"ul")(29,"li"),o(30,"\u2713 Donators will see your location on the map"),t(),n(31,"li"),o(32,"\u2713 When they arrive, show them this QR code"),t(),n(33,"li"),o(34,"\u2713 They will scan it to confirm the donation"),t(),n(35,"li"),o(36,"\u2713 After scanning, you cannot request help again for 3 hours"),t()()(),n(37,"div",81)(38,"button",82),O("click",function(){P(e);let i=d(2);return M(i.downloadQRCode())}),o(39," \u{1F4BE} Download QR Code "),t()(),n(40,"div",83)(41,"label",84)(42,"input",85),q("ngModelChange",function(i){P(e);let p=d(2);return T(p.qrCodeSaved,i)||(p.qrCodeSaved=i),M(i)}),t(),n(43,"span"),o(44,"I have saved my QR code and understand how to use it"),t()()()()()}if(r&2){let e=d(2);l(3),c("innerHTML",h(4,10,e.getIcon("check")),_),l(7),c("innerHTML",h(11,12,e.getIcon("qr-code")),_),l(8),c("qrdata",e.qrCodeData)("width",256)("errorCorrectionLevel","M")("elementType","canvas"),l(4),E(" ",e.qrCodeData," "),l(3),c("innerHTML",h(26,14,e.getIcon("clipboard")),_),l(17),R("ngModel",e.qrCodeSaved),c("ngModelOptions",D(16,de))}}function Me(r,m){if(r&1){let e=S();n(0,"button",86),O("click",function(){P(e);let i=d(2);return M(i.previousStep())}),o(1," \u2190 Previous "),t()}if(r&2){let e=d(2);c("disabled",e.loading)}}function Se(r,m){if(r&1){let e=S();n(0,"button",87),O("click",function(){P(e);let i=d(2);return M(i.nextStep())}),o(1," Next \u2192 "),t()}if(r&2){let e=d(2);c("disabled",!e.canProceedToNextStep()||e.loading)}}function Oe(r,m){if(r&1&&(n(0,"span"),s(1,"span",4),u(2,"safeHtml"),o(3," Share Location & Register"),t()),r&2){let e=d(3);l(),c("innerHTML",h(2,1,e.getIcon("location-marker")),_)}}function we(r,m){r&1&&(n(0,"span"),o(1,"Registering..."),t())}function Ee(r,m){if(r&1&&(n(0,"button",88),b(1,Oe,4,3,"span",89)(2,we,2,0,"span",89),t()),r&2){let e=d(2);c("disabled",!e.shareLocationForm.valid||e.loading),l(),c("ngIf",!e.loading),l(),c("ngIf",e.loading)}}function ke(r,m){if(r&1){let e=S();n(0,"button",90),O("click",function(){P(e);let i=d(2);return M(i.proceedToMap())}),s(1,"span",4),u(2,"safeHtml"),o(3," Go to Map "),t()}if(r&2){let e=d(2);c("disabled",!e.qrCodeSaved),l(),c("innerHTML",h(2,2,e.getIcon("map")),_)}}function Fe(r,m){if(r&1){let e=S();n(0,"form",23),O("ngSubmit",function(){P(e);let i=d();return M(i.onSubmit())}),b(1,he,46,14,"div",24)(2,ve,6,2,"div",24)(3,ye,41,12,"div",25)(4,Pe,45,17,"div",24),n(5,"div",26),b(6,Me,2,1,"button",27)(7,Se,2,1,"button",28)(8,Ee,3,3,"button",29)(9,ke,4,4,"button",30),t()()}if(r&2){let e=d();c("formGroup",e.shareLocationForm),l(),c("ngIf",e.currentStep===1),l(),c("ngIf",e.currentStep===2),l(),c("ngIf",e.currentStep===3),l(),c("ngIf",e.currentStep===4),l(2),c("ngIf",e.currentStep>1&&e.currentStep<4),l(),c("ngIf",e.currentStep<3),l(),c("ngIf",e.currentStep===3),l(),c("ngIf",e.currentStep===4)}}var Qe=(()=>{class r{constructor(e,a,i,p,g){this.fb=e,this.authService=a,this.router=i,this.locationService=p,this.iconService=g,this.loading=!1,this.error="",this.currentStep=1,this.photoFile=null,this.photoPreview=null,this.qrCodeData="",this.qrCodeSaved=!1,this.registeredLocationData=null,this.isRestricted=!1,this.restrictionData=null,this.timeRemaining="",this.shareLocationForm=this.fb.group({first_name:["",[x.required]],last_name:["",[x.required]],phone:["",[x.required,x.pattern(/^(09|\+639)\d{9}$/)]],facebook:[""],email:["",[x.email]],notes:[""],supply_needs:this.fb.group({people_count:["",[x.required,x.min(1)]],water:[0,[x.min(0)]],food:[0,[x.min(0)]],medical_supplies:[0,[x.min(0)]],clothing:[0,[x.min(0)]],shelter_materials:[0,[x.min(0)]],other:[""]})})}ngOnInit(){}nextStep(){this.canProceedToNextStep()&&this.currentStep++}previousStep(){this.currentStep>1&&this.currentStep--}canProceedToNextStep(){switch(this.currentStep){case 1:let e=this.shareLocationForm.get("first_name"),a=this.shareLocationForm.get("last_name"),i=this.shareLocationForm.get("phone");return!!(e?.valid&&a?.valid&&i?.valid);case 2:return this.photoFile!==null;case 3:return this.shareLocationForm.get("supply_needs.people_count")?.valid||!1;case 4:return this.qrCodeSaved;default:return!1}}onPhotoSelected(e){let a=e.target.files?.[0];if(!a)return;if(a.size>5*1024*1024){alert("Photo must be less than 5MB");return}if(!a.type.startsWith("image/")){alert("Please capture an image.");return}this.photoFile=a;let i=new FileReader;i.onload=p=>{this.photoPreview=p.target?.result},i.readAsDataURL(a)}removePhoto(){this.photoFile=null,this.photoPreview=null}downloadQRCode(){let e=document.querySelector("canvas");if(e){let a=e.toDataURL("image/png"),i=document.createElement("a");i.download=`donation-qr-${this.qrCodeData}.png`,i.href=a,i.click()}}proceedToMap(){if(!this.qrCodeSaved){alert("Please confirm you have saved your QR code before proceeding.");return}this.router.navigate(["/map"])}onSubmit(){return F(this,null,function*(){if(!(this.shareLocationForm.invalid||!this.photoFile)){this.loading=!0,this.error="";try{let e=yield this.locationService.getCurrentPosition(),a=new FormData;a.append("first_name",this.shareLocationForm.get("first_name")?.value),a.append("last_name",this.shareLocationForm.get("last_name")?.value),a.append("phone",this.shareLocationForm.get("phone")?.value),a.append("facebook",this.shareLocationForm.get("facebook")?.value||""),a.append("email",this.shareLocationForm.get("email")?.value||""),a.append("notes",this.shareLocationForm.get("notes")?.value||""),a.append("latitude",e.coords.latitude.toString()),a.append("longitude",e.coords.longitude.toString()),a.append("accuracy",e.coords.accuracy.toString()),this.photoFile?(console.log("Photo file details:"),console.log("  - Is File instance:",this.photoFile instanceof File),console.log("  - Name:",this.photoFile.name),console.log("  - Size:",this.photoFile.size,"bytes"),console.log("  - Type:",this.photoFile.type),console.log("  - Last modified:",this.photoFile.lastModified),a.append("photo",this.photoFile,this.photoFile.name),console.log("Photo appended to FormData")):console.error("ERROR: No photo file!");let i=this.shareLocationForm.get("supply_needs")?.value;a.append("supply_needs",JSON.stringify(i));let p="anon_"+Date.now()+"_"+Math.random().toString(36).substr(2,9);a.append("session_id",p),console.log("FormData contents:"),a.forEach((y,f)=>{y instanceof File?console.log(`  ${f}: [File] ${y.name} (${y.size} bytes)`):console.log(`  ${f}: ${y}`)}),console.log("Sharing anonymous location...");let g=yield this.locationService.shareAnonymousLocation(a).toPromise();console.log("Location shared successfully!",g),this.qrCodeData=g.qr_code,this.registeredLocationData=g,localStorage.setItem("anonymous_session_id",p),localStorage.setItem("anonymous_location_id",g.id),localStorage.setItem("location_sharing_enabled","true"),localStorage.setItem("phone_number",this.shareLocationForm.get("phone")?.value),localStorage.setItem("qr_code",g.qr_code);let C={id:g.id,phone_number:this.shareLocationForm.get("phone")?.value,first_name:this.shareLocationForm.get("first_name")?.value,last_name:this.shareLocationForm.get("last_name")?.value,role:"affected",is_anonymous:!0,qr_code:g.qr_code};this.authService.setCurrentUser(C),console.log("Affected user registered and stored:",C),this.loading=!1,this.currentStep=4}catch(e){if(this.loading=!1,console.error("Full error object:",e),console.error("Error status:",e?.status),console.error("Error message:",e?.error),e?.status===429&&e?.error?.restriction){this.isRestricted=!0,this.restrictionData=e.error.restriction,this.calculateTimeRemaining(),this.error=e.error.error||"You recently received a donation. Please wait before requesting help again.";return}if(e?.error)if(typeof e.error=="object"&&!e.error.restriction){let a=Object.entries(e.error).map(([i,p])=>`${i}: ${Array.isArray(p)?p.join(", "):p}`).join(`
`);this.error=a||"Unable to share location. Please try again."}else this.error=e.error.error||e.error||"Unable to share location. Please try again.";else this.error="Unable to share location. Please try again."}}})}calculateTimeRemaining(){if(!this.restrictionData)return;let e=new Date().getTime(),i=new Date(this.restrictionData.next_allowed_at).getTime()-e;if(i<=0){this.timeRemaining="Restriction expired. You can now request help.",this.isRestricted=!1;return}let p=Math.floor(i/(1e3*60*60)),g=Math.floor(i%(1e3*60*60)/(1e3*60)),C=Math.floor(i%(1e3*60)/1e3);this.timeRemaining=`${p} hour(s), ${g} minute(s), ${C} second(s)`,setTimeout(()=>this.calculateTimeRemaining(),1e3)}getIcon(e,a="md"){return this.iconService.getIcon(e,a)}static{this.\u0275fac=function(a){return new(a||r)(w(re),w($),w(B),w(pe),w(U))}}static{this.\u0275cmp=I({type:r,selectors:[["app-register-affected"]],standalone:!0,features:[A],decls:45,vars:23,consts:[[1,"container"],[1,"auth-container"],[1,"card"],[1,"card-header"],[3,"innerHTML"],[1,"subtitle"],[1,"alert","alert-info"],["class","alert alert-error",4,"ngIf"],["class","alert alert-warning restriction-alert",4,"ngIf"],[1,"step-indicator"],[1,"step"],[1,"step-number"],[1,"step-label"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"auth-footer"],["routerLink","/register/donator"],[1,"alert","alert-error"],[1,"alert","alert-warning","restriction-alert"],[1,"countdown-timer"],[1,"timer-label"],[1,"timer-value"],[1,"restriction-info"],["type","button","routerLink","/map",1,"btn","btn-secondary"],[3,"ngSubmit","formGroup"],["class","form-section",4,"ngIf"],["class","form-section","formGroupName","supply_needs",4,"ngIf"],[1,"form-footer"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-success",3,"disabled",4,"ngIf"],["type","button","class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"form-section"],[1,"help-text"],[1,"form-group"],["for","first_name"],[1,"required"],["type","text","id","first_name","formControlName","first_name","placeholder","Juan",1,"form-control"],["class","error-message",4,"ngIf"],["for","last_name"],["type","text","id","last_name","formControlName","last_name","placeholder","Dela Cruz",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone","placeholder","09123456789",1,"form-control"],["for","facebook"],["type","text","id","facebook","formControlName","facebook","placeholder","facebook.com/yourprofile",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email","placeholder","your@email.com",1,"form-control"],["for","notes"],["id","notes","formControlName","notes","placeholder","Any important information donators should know...","rows","3",1,"form-control"],[1,"error-message"],[1,"photo-upload-section"],["class","photo-preview",4,"ngIf"],["class","photo-upload-buttons",4,"ngIf"],[1,"photo-preview"],["alt","Location photo",3,"src"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"photo-upload-buttons"],["for","photo-camera",1,"btn","btn-primary","btn-block"],["type","file","id","photo-camera","accept","image/*","capture","environment",2,"display","none",3,"change"],["formGroupName","supply_needs",1,"form-section"],["for","people_count"],["type","number","id","people_count","formControlName","people_count","placeholder","e.g., 5","min","1",1,"form-control"],[1,"supply-grid"],["for","water"],["type","number","id","water","formControlName","water","min","0",1,"form-control"],["for","food"],["type","number","id","food","formControlName","food","min","0",1,"form-control"],["for","medical_supplies"],["type","number","id","medical_supplies","formControlName","medical_supplies","min","0",1,"form-control"],["for","clothing"],["type","number","id","clothing","formControlName","clothing","min","0",1,"form-control"],["for","shelter_materials"],["type","number","id","shelter_materials","formControlName","shelter_materials","min","0",1,"form-control"],["for","other"],["id","other","formControlName","other","placeholder","Any other supplies you need...","rows","2",1,"form-control"],[1,"qr-success-message"],[1,"qr-code-container"],[1,"qr-instructions"],[1,"qr-code-display"],[3,"qrdata","width","errorCorrectionLevel","elementType"],[1,"qr-code-value"],[1,"qr-instructions-box"],[1,"qr-actions"],["type","button",1,"btn","btn-primary",3,"click"],[1,"qr-confirmation"],[1,"checkbox-container"],["type","checkbox",3,"ngModelChange","ngModel","ngModelOptions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["type","submit",1,"btn","btn-success",3,"disabled"],[4,"ngIf"],["type","button",1,"btn","btn-success",3,"click","disabled"]],template:function(a,i){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),s(5,"span",4),u(6,"safeHtml"),o(7," Share Your Location - Get Help"),t(),n(8,"p",5),o(9,"Fill out this form to share your location and connect with donators"),t()(),n(10,"div",6)(11,"strong"),s(12,"span",4),u(13,"safeHtml"),o(14," Quick Registration!"),t(),o(15," Complete the steps below to share your location and get assistance. "),t(),b(16,me,2,1,"div",7)(17,fe,23,9,"div",8),n(18,"div",9)(19,"div",10)(20,"span",11),o(21,"1"),t(),n(22,"span",12),o(23,"Contact Info"),t()(),n(24,"div",10)(25,"span",11),o(26,"2"),t(),n(27,"span",12),o(28,"Verify Photo"),t()(),n(29,"div",10)(30,"span",11),o(31,"3"),t(),n(32,"span",12),o(33,"Supply Needs"),t()(),n(34,"div",10)(35,"span",11),o(36,"4"),t(),n(37,"span",12),o(38,"Your QR Code"),t()()(),b(39,Fe,10,9,"form",13),n(40,"div",14)(41,"p"),o(42,"Want to help others? "),n(43,"a",15),o(44,"Register as Donator"),t()()()()()()),a&2&&(l(5),c("innerHTML",h(6,19,i.getIcon("emergency")),_),l(7),c("innerHTML",h(13,21,i.getIcon("location-marker")),_),l(4),c("ngIf",i.error),l(),c("ngIf",i.isRestricted&&i.restrictionData),l(2),v("active",i.currentStep===1)("completed",i.currentStep>1),l(5),v("active",i.currentStep===2)("completed",i.currentStep>2),l(5),v("active",i.currentStep===3)("completed",i.currentStep>3),l(5),v("active",i.currentStep===4),l(5),c("ngIf",!i.isRestricted))},dependencies:[V,z,N,le,Z,Y,ee,W,J,K,ie,te,oe,ne,ae,X,Q,j,se,ce,G],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.auth-container.role-selection[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:900px}.card[_ngcontent-%COMP%]{max-width:600px;width:100%}.text-center[_ngcontent-%COMP%]{text-align:center}.subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:1rem;margin-top:8px;font-weight:400}.role-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin:30px 0}.role-card[_ngcontent-%COMP%]{padding:32px 24px;border:3px solid #e5e7eb;border-radius:16px;text-align:center;cursor:pointer;transition:all .3s ease;background:#fff}.role-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 24px #00000026}.role-card.affected[_ngcontent-%COMP%]{border-color:#fecaca}.role-card.affected[_ngcontent-%COMP%]:hover{border-color:#dc2626;background:#fef2f2}.role-card.donator[_ngcontent-%COMP%]{border-color:#bfdbfe}.role-card.donator[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#eff6ff}.role-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:16px}.role-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#111827;margin-bottom:8px}.role-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:20px;font-size:1rem}.role-features[_ngcontent-%COMP%]{list-style:none;padding:0;margin:20px 0;text-align:left}.role-features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 0;color:#374151;font-size:.95rem}.role-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px;width:100%;padding:12px 24px;font-size:1rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .2s}.btn-affected[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.btn-affected[_ngcontent-%COMP%]:hover{background:#b91c1c;transform:scale(1.05)}.btn-donator[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-donator[_ngcontent-%COMP%]:hover{background:#2563eb;transform:scale(1.05)}.btn-block[_ngcontent-%COMP%]{width:100%}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid #e5e7eb}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2563eb;text-decoration:none}@media (max-width: 768px){.role-cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.role-card[_ngcontent-%COMP%]{padding:24px 20px}.role-icon[_ngcontent-%COMP%]{font-size:3rem}}.subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin-top:8px;font-weight:400}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#374151;margin:24px 0 16px;padding-bottom:8px;border-bottom:2px solid #e5e7eb}.section-title[_ngcontent-%COMP%]:first-of-type{margin-top:0}.help-text[_ngcontent-%COMP%]{display:block;font-size:.85rem;color:#6b7280;margin-top:4px;font-style:italic}.checkbox-group[_ngcontent-%COMP%]{background:#f9fafb;padding:16px;border-radius:8px;border:1px solid #e5e7eb;margin:20px 0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;cursor:pointer;font-weight:500;color:#374151}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;margin-top:2px;cursor:pointer;accent-color:#3b82f6}.checkbox-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.checkbox-group[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{margin-left:30px;margin-top:8px}.required[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#dc2626}.btn-primary[_ngcontent-%COMP%]{background:#dc2626}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#b91c1c}.step-indicator[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 24px;background:#f9fafb;border-bottom:1px solid #e5e7eb;margin:-20px -24px 20px}.step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1;position:relative;opacity:.5;transition:opacity .3s}.step.active[_ngcontent-%COMP%]{opacity:1}.step.completed[_ngcontent-%COMP%]{opacity:.8}.step-number[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:#e5e7eb;color:#6b7280;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.9rem;margin-bottom:8px;transition:all .3s}.step.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.step.completed[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:#10b981;color:#fff}.step-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-weight:500;text-align:center}.step.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#111827;font-weight:600}.photo-upload-section[_ngcontent-%COMP%]{margin:20px 0}.photo-preview[_ngcontent-%COMP%]{text-align:center}.photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:400px;border-radius:8px;margin-bottom:16px;border:2px solid #e5e7eb}.photo-upload-buttons[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:#f9fafb;border:2px dashed #d1d5db;border-radius:8px}.photo-upload-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:12px}.supply-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin:20px 0}.form-section[_ngcontent-%COMP%]{margin:20px 0}.form-footer[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:24px;padding-top:20px;border-top:1px solid #e5e7eb}.form-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:120px}.auth-footer[_ngcontent-%COMP%]{margin-top:20px;text-align:center;font-size:.9rem}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none;font-weight:500}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.qr-success-message[_ngcontent-%COMP%]{background:#d1fae5;border:2px solid #10b981;border-radius:8px;padding:20px;margin-bottom:24px;text-align:center}.qr-success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#065f46;margin:0 0 8px;font-size:1.3rem}.qr-success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#047857;margin:0;font-size:.95rem}.qr-code-container[_ngcontent-%COMP%]{background:#f9fafb;border:2px solid #e5e7eb;border-radius:12px;padding:24px;text-align:center}.qr-code-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1f2937;margin:0 0 12px;font-size:1.2rem}.qr-instructions[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin-bottom:20px;line-height:1.5}.qr-code-display[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;display:inline-block;box-shadow:0 2px 8px #0000001a;margin:20px 0}.qr-code-value[_ngcontent-%COMP%]{background:#fef3c7;border:2px solid #f59e0b;border-radius:8px;padding:12px;margin:16px 0;font-family:monospace;font-size:.95rem;color:#92400e;word-break:break-all}.qr-instructions-box[_ngcontent-%COMP%]{background:#eff6ff;border:2px solid #3b82f6;border-radius:8px;padding:16px;margin:20px 0;text-align:left}.qr-instructions-box[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#1e40af;margin:0 0 12px;font-size:1rem}.qr-instructions-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px;color:#1e40af}.qr-instructions-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px 0;line-height:1.5}.qr-actions[_ngcontent-%COMP%]{margin:20px 0}.qr-confirmation[_ngcontent-%COMP%]{margin-top:24px;padding-top:20px;border-top:2px solid #e5e7eb}.checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;cursor:pointer;font-size:.95rem;color:#374151;font-weight:500}.checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.checkbox-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.restriction-alert[_ngcontent-%COMP%]{background:#fef3c7!important;border:3px solid #f59e0b!important;padding:24px!important;margin:20px 0!important}.restriction-alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#92400e;margin:0 0 12px;font-size:1.3rem}.restriction-alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#92400e;margin:8px 0}.countdown-timer[_ngcontent-%COMP%]{background:#fff;border:2px solid #f59e0b;border-radius:12px;padding:20px;margin:20px 0;text-align:center}.timer-label[_ngcontent-%COMP%]{font-size:.9rem;color:#92400e;font-weight:600;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px}.timer-value[_ngcontent-%COMP%]{font-size:1.8rem;color:#f59e0b;font-weight:700;font-family:monospace}.restriction-info[_ngcontent-%COMP%]{background:#fffbeb;border-left:4px solid #f59e0b;padding:16px;margin:16px 0;border-radius:4px}.restriction-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;line-height:1.6}.alert-warning[_ngcontent-%COMP%]{background-color:#fef3c7;border:2px solid #f59e0b;color:#92400e}"]})}}return r})();export{Qe as RegisterAffectedComponent};
